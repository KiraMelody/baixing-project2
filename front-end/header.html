<!DOCTYPE html>

<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <!-- Loading Bootstrap -->
    <link href="css/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Loading Flat UI -->
    <link href="css/flat-ui.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/header.css">

</head>
<body>
<nav id="common-header" class="navbar navbar-default" role="navigation">
    <!-- common head template -->
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-01">
        <span class="sr-only">Toggle navigation</span>
    </button>
    <a href="" class="navbar-brand">迟到管理系统</a>
        </div>
        <div class="collapse navbar-collapse" id="navbar-collapse-01">
        <ul class="nav navbar-nav">
        <li class="" id="tab1"><a href="#" id="assembly">会议记录</a></li>
        <li class="" id="tab2"><a href="#" id="late">迟到记录</a></li>
        <li class="" id="tab3"><a href="#" id="booking">订餐记录</a></li>
        <!--li class="" id="tab4"><a href="#" id="add_meeting">添加会议</a></li>-->
        </ul>
        <!--
        <ul class="nav navbar-nav navbar-right">
        <li class="">
        <a><span data-toggle="modal" data-target="#navSetting" class="glyphicon glyphicon-cog"
    aria-hidden="true"></span></a>
        </li>
        <li id="tab4"><a href="login.html" onclick="">登录</a></li>
        <li class="" id="tab5"><a href="register.html" onclick="">注册</a></li>
        </ul>
        -->
        <form id="search-bar" class="navbar-form navbar-right" action="#" role="search" hidden=""
    style="display: block;">
        <div class="form-group">
        <div id="the-basics">
        <span class="twitter-typeahead" style="position: relative; display: inline-block;">
        <input class="form-control typeahead tt-hint" type="text" readonly="" autocomplete="off"
    spellcheck="false" tabindex="-1" dir="ltr"
    style="position: absolute; top: 0; left: 0; border-color: transparent; box-shadow: none; opacity: 1; background-attachment: scroll; background-clip: border-box; background-color: rgb(255, 255, 255); background-image: none; background-origin: padding-box; background-size: auto; background-position: 0% 0%; background-repeat: repeat repeat;">
        <input id="search" class="form-control typeahead tt-input" type="text" placeholder="搜索" autocomplete="off"
    spellcheck="false" dir="auto"
    style="position: relative; vertical-align: top; background-color: transparent;">
        <pre aria-hidden="true"
    style="position: absolute; visibility: hidden; white-space: pre; font-family: Lato, Helvetica, Arial, sans-serif; font-size: 15px; font-style: normal; font-variant-ligatures: normal; font-variant-position: normal; font-variant-caps: normal; font-variant-numeric: normal; font-variant-alternates: normal; font-variant-east-asian: normal; font-weight: 400; word-spacing: 0px; letter-spacing: 0px; text-indent: 0px; text-rendering: auto; text-transform: none;"></pre>
        </span>
        </div>
        </div>
        </form>
        </div>
        </nav>
        <div id="main" class="container-fluid">
        </div>
        </body>
        </html>

<script src="js/vendor/jquery.min.js"></script>
<script src="js/vendor/respond.min.js"></script>
<script src="js/flat-ui.min.js"></script>
<script>
    $(document).ready(function () {
        $("#assembly").trigger("click");
    });
    $("#assembly").click(function () {
        $("#assembly").parent().addClass("active");
        $("#late").parent().removeClass("active");
        $("#booking").parent().removeClass("active");
        $("#add_meeting").parent().removeClass("active");

        $.getJSON("assembly.js", function (result) {
            tableClear();
            var head = ["会议编号", "会议名", "会议时间", "组织者"];
            var head_en = ["meeting_id", "meeting_name", "meeting_time", "meeting_creator"];
            show(head, head_en, result);
        })
    });

    $("#late").click(function () {
        $("#assembly").parent().removeClass("active");
        $("#late").parent().addClass("active");
        $("#booking").parent().removeClass("active");
        $("#add_meeting").parent().removeClass("active");

        $.getJSON("assembly.js", function (result) {
            tableClear();
            var head = ["姓名", "会议时间", "迟到时间", "会议名", "会议编号"];
            var head_en = ["name", "meeting_time", "arrive_time", "meeting_name", "meeting_id"];
            show(head, head_en, result);
        })
    });

    $("#booking").click(function () {
        $("#assembly").parent().removeClass("active");
        $("#late").parent().removeClass("active");
        $("#booking").parent().addClass("active");
        $("#add_meeting").parent().removeClass("active");

        $.getJSON("assembly.js", function (result) {
            tableClear();
            var head = ["组织者", "日期", "金额"];
            var head_en = ["meeting_creator", "date", "money"];
            show(head, head_en, result);
        })
    });

    $("#add_meeting").click(function () {
        $("#assembly").parent().removeClass("active");
        $("#late").parent().removeClass("active");
        $("#booking").parent().removeClass("active");
        $("#add_meeting").parent().addClass("active");
        $.ajax({
            url: "add_meeting.html",
            type: "POST",
            success: function (msg) {
                $("#main").empty();
                $("#main").append(msg);
            }
        })
    });


    function tableClear() {
        $("#main").empty();
        $("#main").append('<a href="#" id="add_meeting"><input type="button" class="btn btn-sm btn-success" style="width: 10%;font-size: large;float:right;" value="新增会议" /> </a>');
        $("#main").append("<table id=\'table\' class=\'table table-striped\'></table>");
        $("table").append("<thead><tr></tr></thead><tbody></tbody>");
    }

    function show(head, head_en, result) {
        head.forEach(function (e) {
            $("tr").append("<th>" + e + "</th>");
        })
        result["meeting_rec"].forEach(function (e) {
            console.log(e);
            var str = "";
            for (i = 0; i < 4; i++) {
                str += "<td>" + e[head_en[i]] + "</td>";
            }
            str = "<tr>" + str + "</tr>";
            $("tbody").append(str);
        })
    }

    $("#search").change(function () {
        str = this.value ;
        $("tbody tr").hide() ;
        $("tr td").each(function () {
            if ($(this).text().search(str)>=0)
                $(this).parent().show() ;
        }) ;
    });

</script>